---
alwaysApply: false
---
# New Feature Checklist

## Required Rule References

Before starting any work, read and follow these existing rules:
- `01-general-rules.mdc` (alphabetize JSON, types, imports)
- `bash.mdc` (bash examples only in docs/README)

## New Web Feature Implementation Checklist

- Define feature scope and route(s) in `packages/web/web-app/src/app`
- Add a dedicated component file; avoid `index.ts`
- Always create Redux reducer (`*.reducer.ts`) and selectors (`*.selectors.ts`) for feature state
- Use RTK Query for API communication, Redux state for UI/filter/pagination state
- Use `useAppSelector` with memoized selectors from `*.selectors.ts`
- Keep types local unless shared across API/web; use `type` not `interface`
- Use existing UI patterns (ContentHeader, TableComponent, Dialog)
- Ensure i18n strings are added to `assets/locales/en.json` and types
- If sockets are needed, connect via shared socket connection utilities
- Confirm no barrel exports are introduced in the web app

### Table View Pattern

When implementing a table/list view:
- Create a `*-list.service.ts` file to handle table header definitions and row data formatting
- Use `getListHeaders()` static method for column definitions
- Use `getRows(data)` method to transform API data into `TableRowType[]`
- Always include a refresh button in the `ContentHeader` (see `user-admin-web-list-header.component.tsx` pattern)
- Store pagination, sorting, and filter state in Redux (persisted where appropriate)

## New API Feature Implementation Checklist

- Add route in `packages/api/api-app/src/routes/v1.routes.ts`
- Create a controller in `packages/api/api-app/src/<feature>`
- Put logic in a service class under `packages/api/libs/<feature>`
- Add Sequelize model if new persistence is required
- Add shared types/constants in `packages/shared/models` as needed
- Use Redis for hot data caching when appropriate
- Use `sendOK`, `sendBadRequest`, and consistent logging patterns
- Add socket handlers under `packages/api/libs/<feature>` if needed
- Use auth/role middleware for protected routes
- APIs are versioned via header property, not on the route directly

## Cross-Cutting Checks

- Ensure feature flag names/constants are centralized in shared models
- Confirm cache invalidation paths are implemented
- Confirm socket notifications trigger client re-fetch when needed
- Add or update tests where coverage exists for the area
- Verify error codes and i18n keys are wired correctly
