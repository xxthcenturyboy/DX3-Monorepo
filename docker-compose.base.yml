# DX3 Base Docker Compose Configuration
# Shared configuration for all development services

name: "dx3"

services:
  base:
    platform: "${DOCKER_HOST_PLATFORM}"
    # Use "no" for development to avoid auto-restarts during debugging
    # Change to "unless-stopped" or "always" for production/staging
    restart: "no"
    build:
      context: .
      dockerfile: Dockerfile
    secrets:
      - source: npmrc
        target: /root/.npmrc
      - source: gitconfig
        target: /root/.gitconfig
    environment:
      - DEV_PLATFORM=DOCKER
